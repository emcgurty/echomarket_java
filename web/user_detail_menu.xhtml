<ui:composition 
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:h="http://xmlns.jcp.org/jsf/html"
  xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
  <h:head>        
  </h:head>

  <ul id="nav" class="user_detail_menu">
    <li class="subs" id="tab_item_0" >
      <h:commandLink immediate="true"  action="#{participantBean.load_ud('-1')}"  value="EchoMarket Agreement"  rendered="#{userBean.editable == -1}" />
    </li>
    <li class="subs" id="tab_item_1" >
      <h:commandLink immediate="true"  action="#{userBean.load_ud(0)}"  value="Login Information"  rendered="#{userBean.editable != -1}" >
        <f:param name="action" value="login" />
      </h:commandLink>
    </li>

    <li class="subs" id="tab_item_2" >
      <h:commandLink immediate="true"  action="#{participantBean.load_ud(userBean.user_id)}"  value="Participant Information.."  rendered="#{userBean.editable != -1}" >
        <f:param name="action" value="participant" />
      </h:commandLink>
    </li>
    <li class="subs" id="tab_item_3" >
      <c:choose>
        <c:when  test="#{itemBean.itemDescription != null}" >
          <c:set var="newItemLabel" value="New item #{itemBean.itemDescription}: Revise Initial Contact Preferences?"  />
        </c:when>
        <c:when  test="#{itemBean.itemDescription == null}" >
          <c:set var="newItemLabel" value="Initial Contact Preferences"  />
        </c:when>
      </c:choose>
      <h:commandLink immediate="true"  action="#{contactPreferenceBean.load_ud(userBean.participant_id)}"  value="#{newItemLabel}"  rendered="#{userBean.editable != -1}" >
        <f:param name="action" value="cp" />
        <f:param name="iid" value="#{itemBean.itemId}" />
      </h:commandLink>
    </li>

    <c:if test="#{(userBean.useIsWhichType() == 'both') or (userBean.useIsWhichType() == 'lend')}" >
      <li >
        <c:choose>
          <c:when  test="#{itemBean.itemDescription != null}" >
            <c:set var="newItemLabelTrans" value="... Revise Item Transfer Preferences?"  />
          </c:when>
          <c:when  test="#{itemBean.itemDescription == null}" >
            <c:set var="newItemLabelTrans" value="Item Transfer Preferences"  />
          </c:when>
        </c:choose>
        <h:commandLink  action="#{lenderTransferBean.load_ud(userBean.participant_id)}"  value="#{newItemLabelTrans}"  immediate="true" rendered="true">
          <f:param name="iid" value="#{itemBean.itemId}" />
        </h:commandLink>   
      </li>
      <li>
        <c:choose>
          <c:when  test="#{itemBean.itemDescription != null}" >
            <c:set var="newItemLabelCond" value="... Revise Item Lending Conditions?"  />
          </c:when>
          <c:when  test="#{itemBean.itemDescription == null}" >
            <c:set var="newItemLabelCond" value="Item Lending Conditions"  />
          </c:when>
        </c:choose>
        <h:commandLink  action="#{lenderItemConditionsBean.load_ud(userBean.participant_id)}"  value="#{newItemLabelCond}"  immediate="true"  rendered="true">
          <f:param name="iid" value="#{itemBean.itemId}" />
        </h:commandLink>   
      </li>

    </c:if>     

    <li class="subs" id="tab_item_5" >
      <h:commandLink immediate="true"  action="#{itemBean.load_ud('borrow', null)}"  value="Borrowing"  rendered="#{userBean.editable != -1}"    >
        <f:param name="action" value="item" />
      </h:commandLink>

    </li>
    <li class="subs" id="tab_item_6" >
      <h:commandLink immediate="true"  action="#{itemBean.load_ud('lend', null)}"  value="Lending"  rendered="#{userBean.editable != -1}"    >
        <f:param name="action" value="item" />
      </h:commandLink>

    </li>
  </ul>
</ui:composition>