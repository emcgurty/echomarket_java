<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"

                template="./echomarketTemplate.xhtml">
    <ui:define name="header"  >
        <ui:include rendered="true" src="application_header.xhtml" id="registrationHeader" /> 
    </ui:define>
    <ui:define name="content">
        <h:form>

            <div class="messagecolor">
                <h:messages showSummary="true" 
                            showDetail="false"
                            errorStyle="color: #d20005" 
                            infoStyle="color: blue"/>
            </div>

            <br />            

            <div id="registration_div"  class="top"  >

                <table class="personal" >

                    <tr>
                        <td>
                            <h:outputLabel for="username" value="#{bundle.username}" >       
                                <h:inputText id="username"
                                             value="#{userBean.username}"
                                             size="16"
                                             required="true"
                                             requiredMessage="#{bundle.ReqUserName}">


                                </h:inputText>
                            </h:outputLabel>
                        </td>
                        <td>

                            <h:outputLabel for="user_alias"  value="#{bundle.userAlias}">       
                                <h:inputText id="user_alias"
                                             size="16"
                                             value="#{userBean.userAlias}"
                                             title="#{bundle.userAlias}"
                                             required="true"
                                             requiredMessage="#{bundle.ReqUserAlias}">


                                </h:inputText>
                            </h:outputLabel>
                        </td>
                    </tr>
                    <tr>
                        <td>              

                            <h:outputLabel for="firstName"  value="#{bundle.firstName}">       
                                <h:inputText id="firstName"
                                             size="16"
                                             value="#{userBean.firstName}"

                                             required="true"
                                             requiredMessage="#{bundle.ReqFirstName}">


                                </h:inputText>
                            </h:outputLabel>
                        </td>
                        <td>
                            <h:outputLabel for="lastName"  value="#{bundle.lastName}" >       
                                <h:inputText id="lastName"
                                             size="16"
                                             value="#{userBean.lastName}"

                                             required="true"
                                             requiredMessage="#{bundle.ReqLastName}">


                                </h:inputText>
                            </h:outputLabel>

                        </td>
                    </tr>
                    <tr>
                        <td>
                            <f:event listener="#{userBean.validatePassword}" type="postValidate" />


                            <h:outputLabel for="password" value="#{bundle.password}" >       
                                <h:inputSecret id="password"
                                               size="16"
                                               value="#{userBean.password}"
                                               title="#{bundle.password}"
                                               required="true"
                                               requiredMessage="#{bundle.ReqPassword}"
                                               >


                                </h:inputSecret>
                            </h:outputLabel>

                        </td>
                        <td>
                            <h:outputLabel for="confirmPassword" value="#{bundle.confirmPassword}" >       
                                <h:inputSecret id="confirmPassword"
                                               size="16"
                                               title="#{bundle.confirmPassword}"
                                               required="true"
                                               requiredMessage="#{bundle.ReqConfirmPassword}">


                                </h:inputSecret>
                            </h:outputLabel>
                        </td>
                    </tr>
                    <tr colspan="2">
                        <td>
                            <h:outputLabel for="email" value="#{bundle.email}" >       
                                <h:inputText id="email"
                                             size="16"
                                             value="#{userBean.email}"
                                             title="#{bundle.email}"
                                             required="true"
                                             requiredMessage="#{bundle.ReqEmail}"
                                             validatorMessage="#{bundle.ValidEmail}" 
                                             >
                                    <f:validateRegex
                                        pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
                                </h:inputText>
                            </h:outputLabel>

                        </td>
                    </tr>
                    <tr >
                        <td>

                            <h:outputLabel for="userTypeArray" value="#{bundle.userType}" >
                                <h:selectManyCheckbox id="userTypeArray" value="#{userBean.userTypeArray}" >
                                    <f:selectItems id="user_type_value" value="#{purposeBean.buildPurposeArray()}"  var="c"
                                                   itemLabel="#{c.purposeType}" itemValue="#{c.purposeShort}"  >   
                                    </f:selectItems>
                                </h:selectManyCheckbox>
                            </h:outputLabel>   
                        </td>
                        <td>


                            <h:commandLink  action="#{userBean.registerUser()}" id="add_registration" value="Register">

                                <!--                <f:actionListener 
                                                    type="echo_market.listeners.UserActionListener"  />-->

                            </h:commandLink>
                        </td>
                    </tr>
                </table>
            </div>
        </h:form>

    </ui:define>
    <ui:define name="footer"  >
        <ui:include rendered="true" src="application_footer.xhtml" id="registrationHeader" /> 
    </ui:define>

</ui:composition>
