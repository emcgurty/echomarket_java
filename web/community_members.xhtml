<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:fn="http://java.sun.com/jsp/jstl/functions"
                template="./echomarketTemplate.xhtml"         >
    <ui:define name="header"  >
        <ui:include rendered="true" src="application_header.xhtml" id="communityHeader" /> 
    </ui:define>

    <ui:define name="content">

        <h:head>
            <h:outputScript library="javascript" name="community.js"  />`
            <h:outputStylesheet library="css" name="member.css"/>
            <title>#{bundle.communityMemberTitle}</title>
        </h:head>

        <ui:include rendered="true" src="dumbyDiv.xhtml" id="dumbyDiv" /> 

        <div class="messagecolor">
            <h:messages showSummary="true" 
                        showDetail="false"
                        errorStyle="color: #d20005" 
                        infoStyle="color: blue"/>
        </div>

        <div  class="top" id="form_community_members">
            <h:form id="member_build" >
                <div class="top" >
                    <div style="margin:10px;margin-top:25px;" >
                        <h:outputText value="#{communityMembersBean.editable} : Community Members" />

                    </div> 
                </div> 

                <h:dataTable value="#{communityMembersBean.buildCommunityMembersList()}" id="member" var="member" 
                             styleClass="member-table"
                             headerClass="member-table-header"
                             rowClasses="member-table-odd-row,member-table-even-row"
                             style="margin: 25px;"
                             rendered="#{communityMembersBean.editable != 3}"
                             >

                    <h:column >
                        <f:facet name="header" >First Name</f:facet>
                        <h:outputText value="#{member.firstName}" rendered="#{member.editable == 0}" />
                        <h:inputText value="#{communityMembersBean.firstName}" rendered="#{member.editable == 1}" />

                    </h:column>
                    <h:column>
                        <f:facet name="header">Last Name</f:facet>
                        <h:outputText value="#{member.lastName}" rendered="#{member.editable == 0}" />
                        <h:inputText value="#{communityMembersBean.lastName}" rendered="#{member.editable == 1}" />

                    </h:column>
                    <h:column>
                        <f:facet name="header">Alias</f:facet>
                        <h:outputText value="#{member.alias}" rendered="#{member.editable == 0}" />
                        <h:inputText value="#{communityMembersBean.alias}" rendered="#{member.editable == 1}" />
                    </h:column>
                    <h:column>
                        <f:facet name="header">Email</f:facet>
                        <h:outputText value="#{member.email}" rendered="#{member.editable == 0}" />
                        <h:inputText value="#{communityMembersBean.email}" rendered="#{member.editable == 1}" />
                    </h:column>
                    <h:column>
                        <f:facet name="header">Is Active?</f:facet>
                        <h:outputText value="#{member.isActive  == 1 ? 'Yes' : 'No'}" style="color: #045491; font-weight: bold;" rendered="#{member.editable == 0}" />
                        <h:inputHidden value="#{communityMembersBean.isActive}" id="isActive" rendered="#{member.editable == 0}" />
                        <h:selectBooleanCheckbox
                            id="isActive_boolean" rendered="#{member.editable == 1}"  
                            value="#{communityMembersBean.isActive_boolean}" />

                    </h:column>
                    <h:column>
                        <f:facet name="header">Action</f:facet>

                        <h:commandLink value="Edit" action="#{communityMembersBean.editAction(member)}" rendered="#{member.editable == 0}" />
                        <br />
                        <h:commandLink value="Add Member" action="#{communityMembersBean.addAction()}" />    
                        <br />
                        <h:commandLink value="Update" action="#{communityMembersBean.updateAction(member)}" rendered="#{member.editable == 1}" />
                        <br />
                        

                    </h:column>
                </h:dataTable>

                <h:dataTable value="communityMembersBean.existing_member" id="existing_member" var="new" 
                             styleClass="member-table"
                             headerClass="member-table-header"
                             rowClasses="member-table-odd-row,member-table-even-row"
                             style="margin: 25px;"
                             rendered="#{communityMembersBean.editable == 3}" >
                    >

                                        <h:column >
                        <f:facet name="header" >First Name</f:facet>
                        <h:inputText value="#{communityMembersBean.efirstName}"  />

                    </h:column>
                    <h:column>
                        <f:facet name="header">Last Name</f:facet>
                        <h:inputText value="#{communityMembersBean.elastName}"  />

                    </h:column>
                    <h:column>
                        <f:facet name="header">Alias</f:facet>
                        <h:inputText value="#{communityMembersBean.ealias}"  />
                    </h:column>
                    <h:column>
                        <f:facet name="header">Email</f:facet>
                        <h:inputText value="#{communityMembersBean.eemail}"  />
                    </h:column>
                    <h:column>
                        <f:facet name="header">Is Active?</f:facet>
                        
                        <h:inputHidden value="#{communityMembersBean.isActive}" id="isActive"  />
                        <h:selectBooleanCheckbox
                            id="isActive_boolean" value="#{communityMembersBean.isActive_boolean}" />

                    </h:column>

                    <h:column >
                        <h:commandLink value="Save New Member" action="#{communityMembersBean.saveAction()}"  />
                    </h:column>
                </h:dataTable>

            </h:form>
        </div>

    </ui:define>

    <ui:define name="footer"  >
        <ui:include rendered="true" src="application_footer.xhtml" id="CommunityMemberFooter" /> 
    </ui:define>

</ui:composition>
