<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                template="./echomarketTemplate.xhtml">

    <ui:define name="header"  >
        <ui:include rendered="true" src="application_header.xhtml" id="UserDetailHeader" />
    </ui:define>
    <ui:define name="content"  >

        <h:form id="user_detail"  enctype="multipart/form-data" >

            <h:head>
                <h:outputScript library="javascript" name="user_detail.js"  />
                <h:outputScript library="javascript" name="borrower_seeking.js"  rendered="#{(userBean.editable > 2) }"/>

                <title>#{bundle.userDetailTitle}</title>
            </h:head>

            <ui:include rendered="true" src="user_detail_menu.xhtml" id="UserDetailMenu" /> 
            <h:inputHidden id="editable" value="#{userBean.editable}" />
            <h:outputText value="#{userBean.editable}" />
                        
            <div id="borrower_registration" style="width:inherit;" >

                <c:choose>
                    <c:when test="#{userBean.editable == -1 }">
                        <ui:include src="user_agreement.xhtml" id="user_agreement"   />
                    </c:when>
                    <c:when test="#{(userBean.editable == 0) or (userBean.editable == 1) }">
                        <ui:include src="user_login_update.xhtml" id="login_update"   />
                    </c:when>
                    <c:when test="#{(userBean.editable == 2) or (userBean.editable == 3) }">
                        <ui:include src="user_nae.xhtml" id="name_address_email" />
                    </c:when>
                    <c:when test="#{(userBean.editable == 4) or (userBean.editable == 5) }">
                        <ui:include src="borrower_menu.xhtml" id="borrowersMenu"  rendered="#{userBean.userIsWhichType() == 'borrow'}" />
                        <ui:include src="lender_menu.xhtml" id="lendersMenu" rendered="#{(userBean.userIsWhichType() == 'lend') or (userBean.userIsWhichType() == 'both')}" />
                        <ui:include src="user_contact_preferences.xhtml" id="contact_preferences" />
                    </c:when>     
                                        
                    <c:when test="#{(userBean.editable == 8) or (userBean.editable == 9) }">
                        <ui:include src="lender_menu.xhtml" id="lendersMenu" />
                        <ui:include src="lender_conditions.xhtml" id="lender_conditions" />
                    </c:when>     
                    <c:when test="#{(userBean.editable == 10) or (userBean.editable == 11) }">
                        <ui:include src="lender_menu.xhtml" id="lendersMenu" rendered="#{(userBean.editable == 11)}" />
                        <ui:include src="lender_lender.xhtml" id="lender_transfer" />
                    </c:when>     
                    <c:when test="#{userBean.editable == 13}">
                        <ui:include src="borrower_panel.xhtml" id="b_panel" />
                    </c:when>        

                    <c:when test="#{(userBean.editable == 15  or userBean.editable == 17)}">
                        <ui:include src="lender_panel.xhtml" id="l_panel"  />
                    </c:when>        

                    <c:otherwise>
                        <ui:include  src="user_detail.xhtml" id="ud"  /> 
                    </c:otherwise>
                </c:choose>

            </div>

        </h:form>
    </ui:define>
    <ui:define name="footer"  >
        <ui:include rendered="true" src="application_footer.xhtml" id="UserDetailFooter" /> 
    </ui:define>
</ui:composition>


