<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition 
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://xmlns.jcp.org/jsf/html"
  xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
  template="./UserDetailTemplate.xhtml">

  <ui:define name="header"  >
    <ui:include rendered="true" src="application_header.xhtml" id="LoginHeader" /> 
  </ui:define>  

  <ui:define name="content">
    <h:form id="personal_information"  class="lender_transfer">
      <div id="lender_transfer" class="contact_information" >
        <body onload="changeMenuBackground(3);"  >
          <div id="form_lender_to_borrower" class="contact_information" >
            <c:set var="iid" value="#{itemBean.itemId}"  />  
            <c:set var="rid" value="#{userBean.roleId}"  />  
            <c:choose >
              <c:when test="#{empty iid }" >
                <c:choose >
                  <c:when test="#{rid == 0}" >
                    <ui:include src="/user_detail_menu.xhtml" id="user_detail_menu" />  
                  </c:when>
                  <c:when test="#{rid == 1}" >
                    <ui:include src="/creator_menu.xhtml" id="user_detail_menu" />  
                  </c:when>
                </c:choose>   
              </c:when>
              <c:when test="#{!empty iid }" >
                <ui:include src="/item_menu.xhtml" id="item_menu" />  
              </c:when>        
            </c:choose>

            <div class="top" >
              <div style="margin:10px;margin-top:25px;" >
                <h:outputText value="#{userBean.userAlias}: USER DASHBOARD"  />
                <c:choose >
                  <c:when test="#{empty lenderTransferBean.lenderTransferId}" >
                    <c:set var="save_update"  value="Save Item Transfer Preferences" />
                  </c:when >
                  <c:when test="#{!empty lenderTransferBean.lenderTransferId}" >
                    <c:set var="save_update"  value="Update Item Transfer Preferences" />
                  </c:when >
                </c:choose>
                <h:commandLink  action="#{lenderTransferBean.updateLIT()}"  class="right_div" value="#{save_update}"  rendered="#{userBean.editable == 1}"  />
                <h:commandLink  action="#{lenderTransferBean.load_ud(userBean.participant_id)}"  class="right_div" value="Edit Item Transfer Preference"  rendered="#{userBean.editable == 0}" >
                  <f:param name="action" value="edit" />
                </h:commandLink>
              </div> 
              <div class="messagecolor">
                <h:messages showSummary="true" 
                            showDetail="false"
                            errorStyle="color: #d20005" 
                            infoStyle="color: indigo"/>
              </div>
            </div>

            <div  class="div_p"  >
              <div style="margin:10px;" >
                 <h:outputText value="Lender Item Transfer Preferences"  />
                <h:commandLink  action="#{lenderItemConditionsBean.load_ud(userBean.participant_id)}"  class="right_div" value="Continue to 'Item Lending Conditions'" rendered="#{userBean.LITid}"  >
                  <f:param name="action" value="edit" />
                </h:commandLink>
              </div>
            </div>

            <div  class="div_p"  >
              <div style="margin:10px;" >
                <h:outputText value="How would you like a borrower to receive your item?" />
                <h:inputHidden id="lenderTransferId" value="#{lenderTransferBean.lenderTransferId}" />
                <h:inputHidden id="itemId" value="#{lenderTransferBean.itemId}"  />
              </div>
            </div>

            <div style="margin-left:25px;margin-top:5px;float:left;">

              <div id="BComesToWhichAddressGroup" >    
                <h:outputLabel value="Borrower comes to which address?:" for="borrowerComesToWhichAddress">
                  <h:selectOneRadio id="borrowerComesToWhichAddress" value="#{lenderTransferBean.borrowerComesToWhichAddress}" rendered="#{userBean.editable == 1}"  layout="pageDirection" >
                    <f:selectItem itemValue="3" itemLabel="... your Primary Address?" />
                    <f:selectItem itemValue="2" itemLabel="... your Alternative Address?" />	
                    <f:selectItem itemValue="1" itemLabel="Either address is fine." />
                    <f:selectItem itemValue="0" itemLabel="Neither, no pick up at any address please." />	
                  </h:selectOneRadio> 
                  <c:if test="#{userBean.editable == 0}" >
                    <c:choose>
                      <c:when test="#{lenderTransferBean.borrowerComesToWhichAddress == 0}">
                        <c:set var="cbe" value="Neither, no pick up at any address"/>
                      </c:when>
                      <c:when test="#{lenderTransferBean.borrowerComesToWhichAddress == 1}">
                        <c:set var="cbe" value="Either address is fine"/>
                      </c:when>
                      <c:when test="#{lenderTransferBean.borrowerComesToWhichAddress == 2}">
                        <c:set var="cbe" value="To your alternative address"/>
                      </c:when>
                      <c:when test="#{lenderTransferBean.borrowerComesToWhichAddress == 3}">
                        <c:set var="cbe" value="To your primary address"/>
                      </c:when>
                      <c:otherwise>
                        <c:set var="cbe" value="Selection not made"/>
                      </c:otherwise>
                    </c:choose>
                    <h:outputText id="borrowerComesToWhichAddressString"   value="#{cbe}" class="RO_text" />
                  </c:if>  
                </h:outputLabel>
              </div>
            </div>

            <div style="margin-left:25px;margin-top:5px;float:left;">                    
              <h:outputLabel for="meetBorrowerAtAgreedL2b" value="Will meet with borrower at an agreed location?:"  >
                <h:selectOneRadio id="meetBorrowerAtAgreedL2b" value="#{lenderTransferBean.meetBorrowerAtAgreedL2b}" rendered="#{userBean.editable == 1}" >
                  <f:selectItem itemValue="1" itemLabel="Yes" />
                  <f:selectItem itemValue="0" itemLabel="No" />

                </h:selectOneRadio>
                <c:if test="#{userBean.editable == 0}" >
                  <c:choose>
                    <c:when test="#{lenderTransferBean.meetBorrowerAtAgreedL2b == 0}">
                      <c:set var="cbe" value="No"/>
                    </c:when>
                    <c:when test="#{lenderTransferBean.meetBorrowerAtAgreedL2b == 1}">
                      <c:set var="cbe" value="Yes"/>
                    </c:when>
                    <c:otherwise>
                      <c:set var="cbe" value="Selection not made"/>
                    </c:otherwise>
                  </c:choose>
                  <h:outputText id="meetBorrowerAtAgreedL2bString"   value="#{cbe}" class="RO_text" />
                </c:if>  
              </h:outputLabel>  
            </div>

            <div style="margin-left:25px;margin-top:5px;float:left;">                    
              <h:outputLabel for="willDeliverToBorrowerPreferredL2b" value="Will deliver to borrower preferred location?:"  >
                <h:selectOneRadio id="willDeliverToBorrowerPreferredL2b" value="#{lenderTransferBean.willDeliverToBorrower}" rendered="#{userBean.editable == 1}">
                  <f:selectItem itemValue="1" itemLabel="Yes" />
                  <f:selectItem itemValue="0" itemLabel="No" />

                </h:selectOneRadio>    
                <c:if test="#{userBean.editable == 0}" >
                  <c:choose>
                    <c:when test="#{lenderTransferBean.willDeliverToBorrower == 0}">
                      <c:set var="cbe" value="No"/>
                    </c:when>
                    <c:when test="#{lenderTransferBean.willDeliverToBorrower == 1}">
                      <c:set var="cbe" value="Yes"/>
                    </c:when>
                    <c:otherwise>
                      <c:set var="cbe" value="Selection not made"/>
                    </c:otherwise>
                  </c:choose>
                  <h:outputText id="willDeliverToBorrowerString"   value="#{cbe}" class="RO_text" />
                </c:if>  
              </h:outputLabel>  
            </div>

            <div style="margin-left:25px;margin-top:5px;float:left;">                    
              <h:outputLabel for="thirdPartyPresenceL2b" value="Would you like a third-party present during transfer to borrower?:"  >
                <h:selectOneRadio id="thirdPartyPresenceL2b" value="#{lenderTransferBean.thirdPartyPresenceL2b}" rendered="#{userBean.editable == 1}">
                  <f:selectItem itemValue="1" itemLabel="Yes" />
                  <f:selectItem itemValue="0" itemLabel="No" />

                </h:selectOneRadio>    
                <c:if test="#{userBean.editable == 0}" >
                  <c:choose>
                    <c:when test="#{lenderTransferBean.thirdPartyPresenceL2b == 0}">
                      <c:set var="cbe" value="No"/>
                    </c:when>
                    <c:when test="#{lenderTransferBean.thirdPartyPresenceL2b == 1}">
                      <c:set var="cbe" value="Yes"/>
                    </c:when>
                    <c:otherwise>
                      <c:set var="cbe" value="Selection not made"/>
                    </c:otherwise>
                  </c:choose>
                  <h:outputText id="thirdPartyPresenceL2bString"   value="#{cbe}" class="RO_text" />
                </c:if>  
              </h:outputLabel>  
            </div>


            <div id="thirdPartyPresenceL2BGroup" style="margin-left:25px;margin-top:5px;float:left;display:none;">
              <h:outputLabel value="Your choice?:" for="lenderThirdPartyChoiceL2b">
                <h:selectOneRadio id="lenderThirdPartyChoiceL2b" value="#{lenderTransferBean.lenderThirdPartyChoiceL2b}" rendered="#{userBean.editable == 1}" >
                  <f:selectItem itemValue="1" itemLabel="Yes" />
                  <f:selectItem itemValue="0" itemLabel="No" />

                </h:selectOneRadio> 
                <c:if test="#{userBean.editable == 0}" >
                  <c:choose>
                    <c:when test="#{lenderTransferBean.lenderThirdPartyChoiceL2b == 0}">
                      <c:set var="cbe" value="No"/>
                    </c:when>
                    <c:when test="#{lenderTransferBean.lenderThirdPartyChoiceL2b == 1}">
                      <c:set var="cbe" value="Yes"/>
                    </c:when>
                    <c:otherwise>
                      <c:set var="cbe" value="Selection not made"/>
                    </c:otherwise>
                  </c:choose>
                  <h:outputText id="lenderThirdPartyChoiceL2bString"   value="#{cbe}" class="RO_text" />
                </c:if>  
              </h:outputLabel>
              <h:outputLabel value="Mutually agreed?:" for="agreedThirdPartyChoiceL2b">
                <h:selectOneRadio id="agreedThirdPartyChoiceL2b" value="#{lenderTransferBean.agreedThirdPartyChoiceL2b}" rendered="#{userBean.editable == 1}" >
                  <f:selectItem itemValue="1" itemLabel="Yes" />
                  <f:selectItem itemValue="0" itemLabel="No" />

                </h:selectOneRadio> 
                <c:if test="#{userBean.editable == 0}" >
                  <c:choose>
                    <c:when test="#{lenderTransferBean.agreedThirdPartyChoiceL2b == 0}">
                      <c:set var="cbe" value="No"/>
                    </c:when>
                    <c:when test="#{lenderTransferBean.agreedThirdPartyChoiceL2b == 1}">
                      <c:set var="cbe" value="Yes"/>
                    </c:when>
                    <c:otherwise>
                      <c:set var="cbe" value="Selection not made"/>
                    </c:otherwise>
                  </c:choose>
                  <h:outputText id="agreedThirdPartyChoiceL2bString"   value="#{cbe}" class="RO_text" />
                </c:if>  
              </h:outputLabel>
            </div>
          </div>

          <div id="form_borrower_to_lender" class="contact_information" >

            <div  class="div_p"  >
              <div style="margin:10px;" >
                <h:outputText value="How would like the borrower to return your item?" />
              </div>
            </div>


            <div style="margin-left:25px;margin-top:5px;float:left;">

              <div id="borrowerReturnsToWhichAddressGroup" >    
                <h:outputLabel value="Borrower returns to your:" for="borrowerReturnsToWhichAddress">
                  <h:selectOneRadio id="borrowerReturnsToWhichAddress" value="#{lenderTransferBean.borrowerReturnsToWhichAddress}"  rendered="#{userBean.editable == 1}">
                    <f:selectItem itemValue="3" itemLabel="... Primary Address?" />
                    <f:selectItem itemValue="2" itemLabel="... Alternative Address?" />	
                    <f:selectItem itemValue="1" itemLabel="Either address is fine." />
                    <f:selectItem itemValue="0" itemLabel="Neither, no address contact please." />	
                  </h:selectOneRadio>    
                  <c:if test="#{userBean.editable == 0}" >
                    <c:choose>
                      <c:when test="#{lenderTransferBean.borrowerReturnsToWhichAddress == 0}">
                        <c:set var="cbe" value="Neither, no pick up at any address"/>
                      </c:when>
                      <c:when test="#{lenderTransferBean.borrowerReturnsToWhichAddress == 1}">
                        <c:set var="cbe" value="Either address is fine"/>
                      </c:when>
                      <c:when test="#{lenderTransferBean.borrowerReturnsToWhichAddress == 2}">
                        <c:set var="cbe" value="Alternative address"/>
                      </c:when>
                      <c:when test="#{lenderTransferBean.borrowerReturnsToWhichAddress == 3}">
                        <c:set var="cbe" value="Primary address"/>
                      </c:when>
                      <c:otherwise>
                        <c:set var="cbe" value="Selection not made"/>
                      </c:otherwise>
                    </c:choose>
                    <h:outputText id="borrowerReturnsToWhichAddressString"   value="#{cbe}" class="RO_text" />
                  </c:if>  
                </h:outputLabel>
              </div>

              <h:outputLabel for="meetBorrowerAtAgreedB2l" value="Will meet with borrower at an agreed location?:"  >
                <h:selectOneRadio id="meetBorrowerAtAgreedB2l" value="#{lenderTransferBean.meetBorrowerAtAgreedB2l}" rendered="#{userBean.editable == 1}" >
                  <f:selectItem itemValue="1" itemLabel="Yes" />
                  <f:selectItem itemValue="0" itemLabel="No" />

                </h:selectOneRadio>    
                <c:if test="#{userBean.editable == 0}" >
                  <c:choose>
                    <c:when test="#{lenderTransferBean.meetBorrowerAtAgreedB2l == 0}">
                      <c:set var="cbe" value="No"/>
                    </c:when>
                    <c:when test="#{lenderTransferBean.meetBorrowerAtAgreedB2l == 1}">
                      <c:set var="cbe" value="Yes"/>
                    </c:when>
                    <c:otherwise>
                      <c:set var="cbe" value="Selection not made"/>
                    </c:otherwise>
                  </c:choose>
                  <h:outputText id="meetBorrowerAtAgreedB2lString"   value="#{cbe}" class="RO_text" />
                </c:if>  
              </h:outputLabel>  

              <h:outputLabel for="willPickUpPreferredLocationB2l" value="Will pick up at borrower's location?:"  >
                <h:selectOneRadio id="willPickUpPreferredLocationB2l" value="#{lenderTransferBean.willPickUpPreferredLocationB2l}" rendered="#{userBean.editable == 1}" >
                  <f:selectItem itemValue="1" itemLabel="Yes" />
                  <f:selectItem itemValue="0" itemLabel="No" />

                </h:selectOneRadio>    
                <c:if test="#{userBean.editable == 0}" >
                  <c:choose>
                    <c:when test="#{lenderTransferBean.willPickUpPreferredLocationB2l == 0}">
                      <c:set var="cbe" value="No"/>
                    </c:when>
                    <c:when test="#{lenderTransferBean.willPickUpPreferredLocationB2l == 1}">
                      <c:set var="cbe" value="Yes"/>
                    </c:when>
                    <c:otherwise>
                      <c:set var="cbe" value="Selection not made"/>
                    </c:otherwise>
                  </c:choose>
                  <h:outputText id="willPickUpPreferredLocationB2lString"   value="#{cbe}" class="RO_text" />
                </c:if>  
              </h:outputLabel>                        

            </div>

            <div style="margin-left:25px;margin-top:5px;float:left;">

              <h:outputLabel for="thirdPartyPresenceB2l" value="Would you like a third-party present during transfer from borrower?:"  >
                <h:selectOneRadio id="thirdPartyPresenceB2l" value="#{lenderTransferBean.thirdPartyPresenceB2l}" rendered="#{userBean.editable == 1}">
                  <f:selectItem itemValue="1" itemLabel="Yes" />
                  <f:selectItem itemValue="0" itemLabel="No" />

                </h:selectOneRadio>    
                <c:if test="#{userBean.editable == 0}" >
                  <c:choose>
                    <c:when test="#{lenderTransferBean.thirdPartyPresenceB2l == 0}">
                      <c:set var="cbe" value="No"/>
                    </c:when>
                    <c:when test="#{lenderTransferBean.thirdPartyPresenceB2l == 1}">
                      <c:set var="cbe" value="Yes"/>
                    </c:when>
                    <c:otherwise>
                      <c:set var="cbe" value="Selection not made"/>
                    </c:otherwise>
                  </c:choose>
                  <h:outputText id="thirdPartyPresenceB2lString"   value="#{cbe}" class="RO_text" />
                </c:if>  
              </h:outputLabel>                        
            </div>

            <div id="thirdPartyPresenceB2lGroup" style="margin-left:25px;margin-top:5px;float:left;display:none;">
              <h:outputLabel value="Your choice?:" for="lenderThirdPartyChoiceB2l">
                <h:selectOneRadio id="lenderThirdPartyChoiceB2l" value="#{lenderTransferBean.lenderThirdPartyChoiceB2l}" rendered="#{userBean.editable == 1}">
                  <f:selectItem itemValue="1" itemLabel="Yes" />
                  <f:selectItem itemValue="0" itemLabel="No" />

                </h:selectOneRadio> 
                <c:if test="#{userBean.editable == 0}" >
                  <c:choose>
                    <c:when test="#{lenderTransferBean.lenderThirdPartyChoiceB2l == 0}">
                      <c:set var="cbe" value="No"/>
                    </c:when>
                    <c:when test="#{lenderTransferBean.lenderThirdPartyChoiceB2l == 1}">
                      <c:set var="cbe" value="Yes"/>
                    </c:when>
                    <c:otherwise>
                      <c:set var="cbe" value="Selection not made"/>
                    </c:otherwise>
                  </c:choose>
                  <h:outputText id="lenderThirdPartyChoiceB2lString"   value="#{cbe}" class="RO_text" />
                </c:if>  
              </h:outputLabel>
              <h:outputLabel value="Mutually agreed?:" for="agreedThirdPartyChoiceB2l">
                <h:selectOneRadio id="agreedThirdPartyChoiceB2l" value="#{lenderTransferBean.agreedThirdPartyChoiceB2l}" rendered="#{userBean.editable == 1}">
                  <f:selectItem itemValue="1" itemLabel="Yes" />
                  <f:selectItem itemValue="0" itemLabel="No" />

                </h:selectOneRadio> 
                <c:if test="#{userBean.editable == 0}" >
                  <c:choose>
                    <c:when test="#{lenderTransferBean.agreedThirdPartyChoiceB2l == 0}">
                      <c:set var="cbe" value="No"/>
                    </c:when>
                    <c:when test="#{lenderTransferBean.agreedThirdPartyChoiceB2l == 1}">
                      <c:set var="cbe" value="Yes"/>
                    </c:when>
                    <c:otherwise>
                      <c:set var="cbe" value="Selection not made"/>
                    </c:otherwise>
                  </c:choose>
                  <h:outputText id="agreedThirdPartyChoiceB2lString"   value="#{cbe}" class="RO_text" />
                </c:if>  
              </h:outputLabel>
            </div>
          </div>
        </body>
      </div>
    </h:form>
  </ui:define>

  <ui:define name="footer"  >
    <ui:include rendered="true" src="application_footer.xhtml" id="LoginFooter" /> 
  </ui:define>
</ui:composition>


