<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"                
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
  <div class="messagecolor">
    <h:messages showSummary="true" 
                showDetail="false"
                errorStyle="color: #d20005" 
                infoStyle="color: indigo"/>
  </div>

  <h:form  id="member_registration"  >

    <c:set var="b_alias" scope="view" value="#{bundle.userAlias}" />
    <c:set var="b_username" scope="view" value="#{bundle.username}" />
    <c:set var="b_password" scope="view" value="#{bundle.password}" />
    <c:set var="b_confirm" scope="view" value="#{bundle.confirmPassword}" />
    <c:set var="b_email" scope="view" value="#{bundle.email}" />

    <div style="width:95%;margin-left: 25px" >
      <h:dataTable value="#{memberRegistrationBean.getMemberInformation()}"  var="mem" >
        <h:column rowHeader="">
          <div class="div_p" >
            <p>Welcome To EchoMarket and to your Community Member Registration! </p>
            <p>Your Community, #{memberRegistrationBean.getCommunityName(mem.communityId)}, has provided some preliminary information which you may change.  Please complete the remaining fields.  All fields are required.</p>  
          </div>   
          <br />
          <table id="user_registration_table">

            <tr >
              <td style="padding-bottom: 15px;">
                <h:outputLabel for="firstName" value="#{bundle.firstName}" >
                  <h:inputText id="firstName"  value="#{mem.firstName}" size="16"
                               required="true"
                               requiredMessage="#{bundle.ReqFirstName}"
                                />
                </h:outputLabel>
              </td>
              <td style=" padding-bottom: 15px;">

                <h:outputLabel for="lastName" value="#{bundle.lastName}" >
                  <h:inputText id="lastName"  value="#{mem.lastName}" size="16"
                               required="true"
                               requiredMessage="#{bundle.ReqLastName}"
                               style="margin-left:5px" />
                </h:outputLabel>

              </td>
            </tr>
            <tr >
              <td style="padding-bottom: 15px;">
                <h:outputLabel for="username" value="#{b_username}" >       
                  <h:inputText id="username"
                               value="#{userBean.username}"
                               size="16"
                               required="true"
                               requiredMessage="#{bundle.ReqUserName}"
                               >
                  </h:inputText>
                </h:outputLabel>
              </td>
              <td style=" padding-bottom: 15px;">

                <h:outputLabel for="user_alias"  value="#{b_alias}">       
                  <h:inputText id="user_alias"
                               size="16"
                               value="#{mem.alias}"
                               title="#{bundle.userAlias}"
                               required="true"
                               requiredMessage="#{bundle.ReqUserAlias}"
                               style="margin-left:5px">
                  </h:inputText>
                </h:outputLabel>
              </td>
            </tr>
            <tr >
              <td style="padding-bottom: 15px;">
                <f:event listener="#{userBean.validatePassword}" type="postValidate" />
                <h:outputLabel for="password" value="#{b_password}" >       
                  <h:inputSecret id="password"
                                 size="16"
                                 value="#{userBean.password}"
                                 title="#{bundle.password}"
                                 required="true"
                                 requiredMessage="#{bundle.ReqPassword}"
                                 >
                  </h:inputSecret>
                </h:outputLabel>

              </td>
              <td style="padding-bottom: 15px;">
                <h:outputLabel for="confirmPassword" value="#{b_confirm}" >       
                  <h:inputSecret id="confirmPassword"
                                 size="16"
                                 title="#{bundle.confirmPassword}"
                                 required="true"
                                 requiredMessage="#{bundle.ReqConfirmPassword}"
                                 style="margin-left:5px">
                  </h:inputSecret>
                </h:outputLabel>
              </td>
            </tr>
            <tr  >
              <td colspan="2" style="width:100%;padding-bottom: 15px;">
                <h:outputLabel for="email" value="#{b_email}" >       
                  <h:inputText id="email"
                               size="16"
                               value="#{mem.emailAlternative}"
                               title="#{b_email}"
                               required="true"
                               requiredMessage="#{bundle.ReqEmail}"
                               validatorMessage="#{bundle.ValidEmail}" 
                               >
                    <f:validateRegex
                      pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
                  </h:inputText>
                </h:outputLabel>
              </td>
            </tr >
            <tr >
            </tr>
          </table>
        </h:column>
      </h:dataTable>   
    </div>   
  </h:form>

</ui:composition>
