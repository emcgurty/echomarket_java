<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:fn="http://java.sun.com/jsp/jstl/functions"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                >


    <h:form enctype="multipart/form-data" id="rb" style="border-bottom-color: indigo; border-bottom-style: double;">

        <div class="messagecolor">
            <h:messages showSummary="true" 
                        showDetail="false"
                        errorStyle="color: #d20005" 
                        infoStyle="color: blue"/>
        </div>

        <div class="top" >
            <div style="margin:10px;margin-top:25px;" >
                <h:outputText value="#{userBean.username}: Items Sought"  />

            </div> 
        </div> 

        <c:set var="currentBorrowerHistory"  value="#{bb.getCurrentBorrower(userBean.user_id)}" />
        <h:dataTable id="history"  value="#{currentBorrowerHistory}" var="history" rendered="${fn:length(currentBorrowerHistory) > 0}" >
            <h:column rowHeader="">
                <div style="margin-left:25px;margin-top:15px;float:left;display:block;" >
                    <h:outputLabel for="itemDescription" value="Item Description:" >
                        <h:outputText  id="itemDescription" value="#{history.itemDescription}" style="margin-left:10px;color:black;"/>
                    </h:outputLabel>
                    <br />
                    <h:outputLabel for="itemModel" value="Item Model:" >
                        <h:outputText  id="itemModel" value="#{history.itemModel}" style="margin-left:10px;color:black;"/>
                    </h:outputLabel>

                    <h:dataTable id="image"  value="#{bb.getCurrentBorrowerImage(history.borrower_id)}" var="i" >
                        <h:column rowHeader="">
                            <h:graphicImage name="#{i.imageFileName}" library="borrower_images" alt="Item Image"   height="100" width="100" rendered="#{!empty i.imageFileName}"/>
                        </h:column>
                    </h:dataTable>

                    <br />
                    <h:commandButton value="Edit"  action="#{bb.getCurrentEditRecord(history.borrower_id)}">
                    </h:commandButton>    

                    <h:commandButton value="Delete"  action="#{bb.deleteCurrentRecord(history.borrower_id,history.itemDescription )}">
                    </h:commandButton>    

                </div>
            </h:column>
        </h:dataTable>

        <div class="top" style="display:block;">
            <div style="margin:10px;margin-top:25px;" >
                <h:outputText value="No Borrower History Records Found" rendered="${fn:length(currentBorrowerHistory) == 0}" />
            </div>
        </div>

    </h:form>

</ui:composition>
